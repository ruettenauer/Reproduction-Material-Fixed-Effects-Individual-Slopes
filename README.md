
<!-- README.md is generated from README.Rmd. Please edit that file -->

# Reproduction-Material-Fixed-Effects-Individual-Slopes

This repository provides all materials for replication of results in

> Rüttenauer T. and Ludwig V. (2020). “Fixed Effects Individual Slopes:
> Accounting and Testing for Heterogeneous Effects in Panel Data or
> Other Multilevel Models”, *Sociological Methods and Research*,
> Forthcoming.

Preprint on SocArXiv: <https://osf.io/preprints/socarxiv/k4rnu/>

Date: 2020-04-10

## Requirements

The code for replication of the simulation results requires the
following folders: “01\_Script”, “02\_Data”, “03\_Output”. All R Scripts
are required in folder “01\_Script”. Stata code and R Scripts for
reproduction of the examples are in “04\_Example1” and “05\_Example2”.

The following packages are necessary for reproduction of main results:

``` r
install.packages("Formula")
install.packages("Matrix")
install.packages("MASS")
install.packages("matrixcalc")
install.packages("plm")
install.packages("aod")
install.packages("feisr") 
install.packages("doParallel")
install.packages("ggplot2")
install.packages("lattice")
install.packages("gridExtra")
install.packages("ggpubr")
install.packages("extrafont")

# Examples require:
install.packages("feisr") 
install.packages("plm")
install.packages("lme4")
install.packages("haven")
install.packages("texreg")
```

## Replication: Monte Carlo simulations

The R script named “00\_FEIS\_Simulation\_Program.R” contains the
simulation program (functions *fesim* and *fesim\_bs*). The R script
“00\_FEIS\_Simulation\_Program\_hpc.R” contains the equivalent
function for parallelization on a high performance cluster. The R script
“01\_FEIS\_Simulation\_Main-Analysis.R” replicates the simulation
results of the main paper. To run the replication files on a HPC,
comment line 85 (loading local version of the program) and uncomment
line 88 (loading the HPC version of the program). Furthermore, comment
the working (line 57) directory, if specified in an external batch file.
The script “02\_FEIS\_Simulation\_Supplementary-Analyses.R” replicates
the simulation results of the supplementary material. The batch files
“01\_runR.sl” and “02\_runR.sl” can be used to run the analyses on a
Slurm HPC.

The folder “02\_Data” contains the results of individual simulation runs
as performed and saved in the replication files.

Parameters (number of observations, time periods, replication trials and
bootstrap replication runs) can be set at the beginning of the
replication files. Note that the code for replication of supplementary
analyses defines two different sets of parameters, once around line 85
for small N simulations, once around line 1287 for lagged treatment
effects and panel selection.

## Replication example 1: Male Marital wage premium

The example requires the dataset “mwp\_US\_analysis.dta” from the
original replication materials of Ludwig and Brüderl (2018), which is
included in the subfolder “01\_Stata”. All materials for data
preparation are provided in the original replication materials – see the
link below. Both, R script and Stata code, read this dta dataset and
perform the analyses presented in the main text of the article. Note
that there are slight differences between the ART and BSHT test
statistics in R and Stata. For consitency reasons, we used the results
obtained in R in the main atricle.

Replication material of Ludwig, V., & Brüderl, J. (2018) “Is There a
Male Marital Wage Premium? New Evidence from the United States” can be
obtained from:
<https://github.com/volkerludwig/Replication-material-for-Ludwig-Bruederl-ASR2018>

## Replication example 2: Effectiveness of the Head Start preschool program

The example requires the dataset “data\_Deming\_2008\_0217.dta” from the
original replication materials of Deming (2009) to be placed in
“01\_Stata”. This dataset is not included in our replication
materials, but can be obtained from the original replication materials
of Deming (2009) – see the link below. All materials for data
preparation are provided in the original replication materials. The
Stata code “01\_Example2\_hs.do” reads this dta dataset, performs
further data preparation and Demings original analyses (based on Demings
original replication files), and performs the analyses presented in the
main text of the article. The R script “01\_Example2\_hs.R” performs the
example analyses of the main paper based on the final dataset “hs.dta”.
This dataset is generated by running the Stata code
“01\_Example2\_hs.do”, and saved in the folder “01\_Stata”. Note
that there are slight differences between the ART and BSHT test
statistics in R and Stata. For consitency reasons, we used the results
obtained in R in the main atricle.

Replication material of Deming, D. (2009) “Early Childhood Intervention
and Life-Cycle Skill Development: Evidence from Head Start” can be
obtained from:
<https://www.aeaweb.org/maintenance.php?id=10.1257/app.1.3.111>

## Run time of simulations

Using 1000 simulation trials (reps = 1000) and 100 bootstrap
replications (bsreps = 100) took nearly 42 hours on 96 parallel cores.
For replication purposes, we recommend to reduce the number of
simulations trials or bootstrap runs. Especially increasing the number
of bootstrap runs in the BHST tests is computationally intense.

## System and version information

Platform: Windows 10 (x86\_64) | GNU/Linux SMP (x86\_64)

Version: R version 3.6.1
